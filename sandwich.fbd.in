
# vim:fileencoding=utf-8:fdm=marker:ft=cgx
# All values in SI units: m,s,kg,N,Pa,J
# (length,time,mass,force,stress,energy).

# Dimensions:
# <L=0.56/2> length in m
# <B=0.1> width in m
# <T=31/1000> total thickness in m: <T>
# <t1=1.5/1000> top laminate thickness in m.
# <t2=1.5/1000> bottom laminate thickness in m.
# <tk=T-t1-t2> core thickness in m: <tk>

# Divisions that determine element count.
# Note that for second order elements, two divisions is one elemen!
# <ldiv = 40> divisions in length.
# <bdiv = 10> devisions in width.
# <tbdiv = 2> divisions in laminate thickness.
# <tkdiv = 6> divisions in core height

# Bottom laminate
seto lam2
    pnt ! 0 0 0
    swep lam2 new tra <L> 0 0 <ldiv>
    swep lam2 new tra 0 <B> 0 <bdiv>
    swep lam2 if1 tra 0 0 <t2> <tbdiv>
setc
# Core
seto core
    copy if1 if2 tra 0 0 0
    swep if2 if3 tra 0 0 <tk> <tkdiv>
setc
# Top laminate
seto lam1
    copy if3 if4 tra 0 0 0
    swep if4 top tra 0 0 <t1> <tbdiv>
setc

## Create the meshes.
# he20 = C3D20
elty all he20
mesh all

# Constraints
seta nodes n all
enq nodes fix rec 0 _ _ 0.001 a
# Remove nodes on dependant contact surfaces from constraints
setr fix n if1 if3
enq nodes disp rec <L> _ 0 0.001 a


# Write data
send all abq
send lam2 abq nam
send core abq nam
send lam1 abq nam
send fix abq nam
send disp abq nam
# Write contact equations
send if1 if2 abq areampc 123
send if3 if4 abq areampc 123

# Show the mesh and selected nodes.
rot -z
rot d 30
rot r 30
frame
zoom 0.8
view elem
plus n fix r 8
plus n disp b 8
